{"ast":null,"code":"import _slicedToArray from \"/home/krishnansh/Documents/WebDev/PS/tom-tom-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/krishnansh/Documents/WebDev/PS/tom-tom-app/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport '@tomtom-international/web-sdk-maps/dist/maps.css';\nimport * as ttapi from '@tomtom-international/web-sdk-services';\nimport * as tt from '@tomtom-international/web-sdk-maps';\nimport { useRef, useState, useEffect } from 'react';\nimport Map from \"./Map.js\";\n// import { destinations } from './constants';\n\nfunction App() {\n  var mapElement = useRef();\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    map = _useState2[0],\n    setMap = _useState2[1];\n  var _useState3 = useState(77.5747463),\n    _useState4 = _slicedToArray(_useState3, 2),\n    longitude = _useState4[0],\n    setLongitude = _useState4[1];\n  var _useState5 = useState(12.9140182),\n    _useState6 = _slicedToArray(_useState5, 2),\n    latitude = _useState6[0],\n    setLatitude = _useState6[1];\n  var convertToPoints = function convertToPoints(lngLat) {\n    return {\n      point: {\n        latitude: lngLat.lat,\n        longitude: lngLat.lng\n      }\n    };\n  };\n  var addDeliveryMarker = function addDeliveryMarker(lngLat, map) {\n    var element = document.createElement('div');\n    element.className = 'marker-delivery';\n    new tt.Marker({\n      element: element\n    }).setLngLat(lngLat).addTo(map);\n  };\n  var drawRoute = function drawRoute(geoJson, map) {\n    if (map.getLayer('route')) {\n      map.removeLayer('route');\n      map.removeSource('route');\n    }\n    map.addLayer({\n      id: 'route',\n      type: 'line',\n      source: {\n        type: 'geojson',\n        data: geoJson\n      },\n      paint: {\n        'line-color': '#4a90e2',\n        'line-width': 6\n      }\n    });\n  };\n  var destinations = [{\n    lng: 12.9140182,\n    lat: 77.5747463\n  }, {\n    lng: 12.9414398,\n    lat: 77.5454111\n  }, {\n    lng: 12.91593975,\n    lat: 77.5858407\n  }, {\n    lng: 12.9414398,\n    lat: 77.5454111\n  }, {\n    lng: 12.8818289,\n    lat: 77.5728281\n  }];\n  // useEffect(() => {\n  //   const origin = {\n  //     lng: longitude,\n  //     lat: latitude,\n  //   }\n\n  //   let map = tt.map({\n  //     key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //     container: mapElement.current,\n  //     stylesVisibility: {\n  //       trafficIncidents: true,\n  //       trafficFlow: true\n  //     },\n  //     center: [longitude, latitude],\n  //     zoom: 14\n  //   });\n  //   setMap(map);\n\n  //   const addMarker = () => {\n  //     const element = document.createElement('div')\n  //     element.className = 'marker'\n  //     const marker = new tt.Marker({\n  //       element: element,\n  //     }).setLngLat([longitude,latitude])\n  //     .addTo(map)\n  //   }\n  //   addMarker();\n\n  //   const sortDestinations = (locations) => {\n  //     const pointsForDestinations = locations.map((destination) => {\n  //       return convertToPoints(destination)\n  //     })\n  //     const callParameters = {\n  //       key:\"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //       destinations: pointsForDestinations,\n  //       origins: [convertToPoints(origin)],\n  //     }\n\n  //   return new Promise((resolve, reject) => {\n  //     ttapi.services\n  //       .matrixRouting(callParameters)\n  //       .then((matrixAPIResults) => {\n  //         const results = matrixAPIResults.matrix[0]\n  //         const resultsArray = results.map((result, index) => {\n  //           return {\n  //             location: locations[index],\n  //             drivingtime: result.response.routeSummary.travelTimeInSeconds,\n  //           }\n  //         })\n  //         resultsArray.sort((a, b) => {\n  //           return a.drivingtime - b.drivingtime\n  //         })\n  //         const sortedLocations = resultsArray.map((result) => {\n  //           return result.location\n  //         })\n  //         resolve(sortedLocations)\n  //       })\n  //     })\n  //   }\n\n  //   const recalculateRoutes = () => {\n  //     sortDestinations(destinations).then((sorted) => {\n  //       sorted.unshift(origin)\n\n  //       ttapi.services\n  //         .calculateRoute({\n  //           key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //           locations: sorted,\n  //         })\n  //         .then((routeData) => {\n  //           const geoJson = routeData.toGeoJson()\n  //           console.log(geoJson)\n  //           drawRoute(geoJson, map)\n  //       })\n  //     })\n  //   }\n\n  //   for (let d in destinations) {\n  //     console.log(destinations[d]);\n  //     addDeliveryMarker(destinations[d],map);\n  //   }\n  //   recalculateRoutes()\n  //   map.on('click', (e) => {\n  //     destinations.push(e.lngLat)\n  //     console.log(e.lngLat)\n  //     addDeliveryMarker(e.lngLat, map)\n  //     recalculateRoutes()\n  //   })\n\n  //   return () => map.remove()\n  //   // callParameters = {\n  //   //   key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //   //   destinations: pointsForDestinations,\n  //   //   origins: [convertToPoints(origin)],\n  //   // }\n  //   // return new Promise((resolve, reject) => {\n  //   // })\n\n  // }, [longitude,latitude]);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, \"GROW SIMPLEE\", /*#__PURE__*/React.createElement(Map, {\n    data: destinations,\n    zoom_level: 11,\n    travel_mode: \"truck\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }));\n}\nexport default App;","map":{"version":3,"names":["React","ttapi","tt","useRef","useState","useEffect","Map","App","mapElement","map","setMap","longitude","setLongitude","latitude","setLatitude","convertToPoints","lngLat","point","lat","lng","addDeliveryMarker","element","document","createElement","className","Marker","setLngLat","addTo","drawRoute","geoJson","getLayer","removeLayer","removeSource","addLayer","id","type","source","data","paint","destinations"],"sources":["/home/krishnansh/Documents/WebDev/PS/tom-tom-app/src/App.js"],"sourcesContent":["import React from 'react'\nimport './App.css';\nimport '@tomtom-international/web-sdk-maps/dist/maps.css'\nimport * as ttapi from '@tomtom-international/web-sdk-services'\nimport * as tt from '@tomtom-international/web-sdk-maps';\nimport { useRef,useState,useEffect } from 'react';\nimport Map from \"./Map.js\"\n// import { destinations } from './constants';\n\nfunction App() {\n\n  const mapElement = useRef();\n\n  const [map, setMap] = useState({});\n\n  const [longitude, setLongitude] = useState(77.5747463);\n  const [latitude, setLatitude] = useState(12.9140182);\n\n  const convertToPoints = (lngLat) => {\n    return {\n      point: {\n        latitude: lngLat.lat,\n        longitude: lngLat.lng\n      }\n    }\n  }\n\n  const addDeliveryMarker = (lngLat, map) => {\n    const element = document.createElement('div')\n    element.className = 'marker-delivery'\n    new tt.Marker({\n      element: element\n    }).setLngLat(lngLat).addTo(map)\n  }\n\n\n  const drawRoute = (geoJson, map) => {\n    if (map.getLayer('route')) {\n      map.removeLayer('route')\n      map.removeSource('route')\n    }\n    map.addLayer({\n      id: 'route',\n      type: 'line',\n      source: {\n        type: 'geojson',\n        data: geoJson\n      },\n      paint: {\n        'line-color': '#4a90e2',\n        'line-width': 6\n      }\n    })\n  }\n\n  const destinations = [{lng: 12.9140182, lat: 77.5747463}, {lng: 12.9414398, lat: 77.5454111}, {lng: 12.91593975, lat: 77.5858407}, {lng: 12.9414398, lat: 77.5454111}, {lng: 12.8818289, lat: 77.5728281}\n  ]\n  // useEffect(() => {\n  //   const origin = {\n  //     lng: longitude,\n  //     lat: latitude,\n  //   }\n\n  //   let map = tt.map({\n  //     key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //     container: mapElement.current,\n  //     stylesVisibility: {\n  //       trafficIncidents: true,\n  //       trafficFlow: true\n  //     },\n  //     center: [longitude, latitude],\n  //     zoom: 14\n  //   });\n  //   setMap(map);\n\n  //   const addMarker = () => {\n  //     const element = document.createElement('div')\n  //     element.className = 'marker'\n  //     const marker = new tt.Marker({\n  //       element: element,\n  //     }).setLngLat([longitude,latitude])\n  //     .addTo(map)\n  //   }\n  //   addMarker();\n    \n\n  //   const sortDestinations = (locations) => {\n  //     const pointsForDestinations = locations.map((destination) => {\n  //       return convertToPoints(destination)\n  //     })\n  //     const callParameters = {\n  //       key:\"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //       destinations: pointsForDestinations,\n  //       origins: [convertToPoints(origin)],\n  //     }\n\n  //   return new Promise((resolve, reject) => {\n  //     ttapi.services\n  //       .matrixRouting(callParameters)\n  //       .then((matrixAPIResults) => {\n  //         const results = matrixAPIResults.matrix[0]\n  //         const resultsArray = results.map((result, index) => {\n  //           return {\n  //             location: locations[index],\n  //             drivingtime: result.response.routeSummary.travelTimeInSeconds,\n  //           }\n  //         })\n  //         resultsArray.sort((a, b) => {\n  //           return a.drivingtime - b.drivingtime\n  //         })\n  //         const sortedLocations = resultsArray.map((result) => {\n  //           return result.location\n  //         })\n  //         resolve(sortedLocations)\n  //       })\n  //     })\n  //   }\n\n\n  //   const recalculateRoutes = () => {\n  //     sortDestinations(destinations).then((sorted) => {\n  //       sorted.unshift(origin)\n\n  //       ttapi.services\n  //         .calculateRoute({\n  //           key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //           locations: sorted,\n  //         })\n  //         .then((routeData) => {\n  //           const geoJson = routeData.toGeoJson()\n  //           console.log(geoJson)\n  //           drawRoute(geoJson, map)\n  //       })\n  //     })\n  //   }\n    \n  //   for (let d in destinations) {\n  //     console.log(destinations[d]);\n  //     addDeliveryMarker(destinations[d],map);\n  //   }\n  //   recalculateRoutes()\n  //   map.on('click', (e) => {\n  //     destinations.push(e.lngLat)\n  //     console.log(e.lngLat)\n  //     addDeliveryMarker(e.lngLat, map)\n  //     recalculateRoutes()\n  //   })\n\n  //   return () => map.remove()\n  //   // callParameters = {\n  //   //   key: \"y1Duis78asfADSQn9HYekaSyUw4siXLf\",\n  //   //   destinations: pointsForDestinations,\n  //   //   origins: [convertToPoints(origin)],\n  //   // }\n  //   // return new Promise((resolve, reject) => {\n  //   // })\n\n  // }, [longitude,latitude]);\n\n\n  return (\n    <div className=\"App\">\n      GROW SIMPLEE\n      {/* <div className=\"map\" ref={mapElement}></div> */}\n      <Map data={destinations} zoom_level={11} travel_mode=\"truck\" />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,WAAW;AAClB,OAAO,kDAAkD;AACzD,OAAO,KAAKC,KAAK,MAAM,wCAAwC;AAC/D,OAAO,KAAKC,EAAE,MAAM,oCAAoC;AACxD,SAASC,MAAM,EAACC,QAAQ,EAACC,SAAS,QAAQ,OAAO;AACjD,OAAOC,GAAG,MAAM,UAAU;AAC1B;;AAEA,SAASC,GAAG,GAAG;EAEb,IAAMC,UAAU,GAAGL,MAAM,EAAE;EAAC,gBAENC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAAA;IAA3BK,GAAG;IAAEC,MAAM;EAAA,iBAEgBN,QAAQ,CAAC,UAAU,CAAC;IAAA;IAA/CO,SAAS;IAAEC,YAAY;EAAA,iBACER,QAAQ,CAAC,UAAU,CAAC;IAAA;IAA7CS,QAAQ;IAAEC,WAAW;EAE5B,IAAMC,eAAe,GAAG,SAAlBA,eAAe,CAAIC,MAAM,EAAK;IAClC,OAAO;MACLC,KAAK,EAAE;QACLJ,QAAQ,EAAEG,MAAM,CAACE,GAAG;QACpBP,SAAS,EAAEK,MAAM,CAACG;MACpB;IACF,CAAC;EACH,CAAC;EAED,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIJ,MAAM,EAAEP,GAAG,EAAK;IACzC,IAAMY,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAG,iBAAiB;IACrC,IAAItB,EAAE,CAACuB,MAAM,CAAC;MACZJ,OAAO,EAAEA;IACX,CAAC,CAAC,CAACK,SAAS,CAACV,MAAM,CAAC,CAACW,KAAK,CAAClB,GAAG,CAAC;EACjC,CAAC;EAGD,IAAMmB,SAAS,GAAG,SAAZA,SAAS,CAAIC,OAAO,EAAEpB,GAAG,EAAK;IAClC,IAAIA,GAAG,CAACqB,QAAQ,CAAC,OAAO,CAAC,EAAE;MACzBrB,GAAG,CAACsB,WAAW,CAAC,OAAO,CAAC;MACxBtB,GAAG,CAACuB,YAAY,CAAC,OAAO,CAAC;IAC3B;IACAvB,GAAG,CAACwB,QAAQ,CAAC;MACXC,EAAE,EAAE,OAAO;MACXC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE;QACND,IAAI,EAAE,SAAS;QACfE,IAAI,EAAER;MACR,CAAC;MACDS,KAAK,EAAE;QACL,YAAY,EAAE,SAAS;QACvB,YAAY,EAAE;MAChB;IACF,CAAC,CAAC;EACJ,CAAC;EAED,IAAMC,YAAY,GAAG,CAAC;IAACpB,GAAG,EAAE,UAAU;IAAED,GAAG,EAAE;EAAU,CAAC,EAAE;IAACC,GAAG,EAAE,UAAU;IAAED,GAAG,EAAE;EAAU,CAAC,EAAE;IAACC,GAAG,EAAE,WAAW;IAAED,GAAG,EAAE;EAAU,CAAC,EAAE;IAACC,GAAG,EAAE,UAAU;IAAED,GAAG,EAAE;EAAU,CAAC,EAAE;IAACC,GAAG,EAAE,UAAU;IAAED,GAAG,EAAE;EAAU,CAAC,CACxM;EACD;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAGA,oBACE;IAAK,SAAS,EAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,cAEnB,eACA,oBAAC,GAAG;IAAC,IAAI,EAAEqB,YAAa;IAAC,UAAU,EAAE,EAAG;IAAC,WAAW,EAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAC3D;AAEV;AAEA,eAAehC,GAAG"},"metadata":{},"sourceType":"module"}